<div class="categories-page">
  <div class="page-container">
    <header class="page-header">
      <div class="header-main">
        <div class="header-text">
          <h1 class="page-title">Nuestras Categor√≠as</h1>
          <p class="page-subtitle">Explora nuestras colecciones</p>
        </div>

        <div class="header-controls">
          <select
            [ngModel]="sortBy()"
            (ngModelChange)="onSortChange($event)"
            class="sort-select"
            aria-label="Ordenar categor√≠as">
            <option value="name-asc">A - Z</option>
            <option value="name-desc">Z - A</option>
            <option value="popular">Populares</option>
          </select>
        </div>
      </div>
    </header>

    <main class="categories-main">
      @if (loading()) {
        <div class="categories-grid">
          @for (i of [1,2,3,4,5,6]; track i) {
            <div class="skeleton-card"></div>
          }
        </div>
      } @else if (sortedCategories().length > 0) {
        <div class="categories-grid">
          @for (cat of sortedCategories(); track cat.id) {
            <article class="category-card"
                     [routerLink]="['/c', cat.slug]"
                     tabindex="0"
                     [attr.aria-label]="'Categor√≠a ' + cat.name">

              <div class="card-image-wrapper">
                <img
                  [src]="getImage(cat)"
                  [alt]="cat.name"
                  class="card-image"
                  loading="lazy">
                <div class="card-overlay"></div>

                <div class="card-content">
                  <h3 class="card-title">{{ cat.name }}</h3>
                  @if (cat.subCategories && cat.subCategories.length > 0) {
                    <p class="card-count">{{ cat.subCategories.length }} subcategor√≠as</p>
                  }
                </div>
              </div>
            </article>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">üì¶</div>
          <h2>No hay categor√≠as disponibles</h2>
          <p>Por el momento no tenemos categor√≠as disponibles.</p>
        </div>
      }
    </main>
  </div>
</div>
