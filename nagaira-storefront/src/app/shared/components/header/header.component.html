<header class="header">
  <div class="container">
    <div class="header-content">
      <a routerLink="/" class="logo">
        <img src="assets/images/NagairaLogo.png" alt="Nagaira" class="logo-image">
        <span class="logo-text">Nagaira</span>
      </a>

      <nav class="nav" [class.nav-open]="menuOpen">
        <a routerLink="/" class="nav-link" (click)="menuOpen = false">Inicio</a>
        <a routerLink="/products" class="nav-link" (click)="menuOpen = false">Productos</a>
        <a routerLink="/categories" class="nav-link" (click)="menuOpen = false">CategorÃ­as</a>
      </nav>

      <div class="search-bar">
        <input 
          type="text" 
          placeholder="Buscar..." 
          [ngModel]="searchTerm()" 
          (ngModelChange)="searchTerm.set($event)"
          (keyup.enter)="onSearch()"
        >
        <button class="search-btn" (click)="onSearch()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <div class="header-actions">
        <a routerLink="/cart" class="cart-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          @if (cartService.itemCount() > 0) {
            <span class="cart-badge">{{ cartService.itemCount() }}</span>
          }
        </a>

        @if (authService.isAuthenticated()) {
          <div class="user-menu">
            <button class="user-btn">
              <span class="user-avatar">{{ authService.currentUser()?.firstName?.charAt(0) }}</span>
              <span class="user-name">{{ authService.currentUser()?.firstName }}</span>
            </button>
            <div class="user-dropdown">
              <a routerLink="/profile" class="dropdown-item">Mi Perfil</a>
              <a routerLink="/orders" class="dropdown-item">Mis Ã“rdenes</a>
              @if (authService.currentUser()?.role === 'Admin' || authService.currentUser()?.role === 'SuperAdmin') {
                <a routerLink="/admin" class="dropdown-item admin-link">ðŸ”§ Backoffice</a>
              }
              <button (click)="logout()" class="dropdown-item">Cerrar SesiÃ³n</button>
            </div>
          </div>
        } @else {
          <a routerLink="/login" class="btn btn-primary">Ingresar</a>
        }

        <button class="menu-toggle" (click)="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </div>
</header>
